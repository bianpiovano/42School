#    â•”â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ğ™šâ‹†Â°ï½¡
#    â”‚.---.       .               â”‚
#    â”‚\___  ,-.   |    ,-. ,-. ,-.â”‚
#    â”‚    \ | |   |    | | | | | |â”‚
#    â”‚`---' `-'   `--' `-' ' ' `-|â”‚
#    â”‚          ~~              ,|â”‚
#    â”‚                          `'â”‚
#  Â°â‹†ğ™šâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•
#                          Ë‹Â°â€¢*â€â·  ğ“œğ“ªğ“´ğ“® ğ“•ğ“²ğ“µğ“®  âœ©â‹†Ëšâ˜¾

# â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€ Â· Â· à­¨à­§ Â· Â· â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
#  ï¼£ï½ï½ï½ï½‰ï½Œï½ï½”ï½‰ï½ï½ ï¼¶ï½ï½’ï½‰ï½ï½‚ï½Œï½…ï½“
# â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€ Â· Â· à­¨à­§ Â· Â· â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯

NAME		= so_long
CC         	= cc
CFLAGS     	= -Wall -Werror -Wextra
RM         	= rm -rf
LIBS_DIR	= lib

#    ğ•„ğ•šğ•Ÿğ•šğ•ƒğ•šğ•“ğ•© â„‚ğ• ğ•ğ•¡ğ•šğ•ğ•’ğ•¥ğ•šğ• ğ•Ÿ   #
# â”€â”€â”€à­¨à§â”€â”€â”€â”€ â‘… â™¡ â‘…  â”€â”€â”€â”€à­¨à§â”€â”€â”€â”€ 
MLX_DIR		= $(LIBS_DIR)/minilibx-linux
MLX			= $(MLX_DIR)/libmlx.a
MLX_INCS	= -I$(MLX_DIR)
MLX_ADD		= -L$(MLX_DIR) -lmlx -lXext -lX11

#    ğ•„ğ•ª ğ•ƒğ•šğ•“ğ•£ğ•’ğ•£ğ•ª ğ”½ğ•šğ•ğ•–ğ•¤    #
# â”€â”€â”€à­¨à§â”€â”€â”€â”€ â‘… â™¡ â‘…  â”€â”€â”€â”€à­¨à§â”€â”€â”€â”€ 
MYLIB_DIR	= $(LIBS_DIR)/mylib
MYLIB		= $(MYLIB_DIR)/libmylib.a
MYLIB_INCS	= -I$(MYLIB_DIR)
MYLIB_ADD	= -L$(MYLIB_DIR) -lmylib

#    ğ”½ğ•¦ğ•Ÿğ•”ğ•¥ğ•šğ• ğ•Ÿ ğ”½ğ•šğ•ğ•–ğ•¤    #
# â”€â”€â”€à­¨à§â”€â”€â”€â”€ â‘… â™¡ â‘…  â”€â”€â”€â”€à­¨à§â”€â”€â”€â”€ 
SRCS 		= src/draw/draw.c \
				src/draw/draw_player.c \
				src/draw/load_resources.c \
				src/events/collectibles.c \
				src/events/display.c \
				src/events/events.c \
				src/events/moves.c \
				src/game/game.c \
				src/map/map_load.c \
				src/map/map_read.c \
				src/map/map_utils.c \
				src/map/map_validation.c \
				src/clean/clean.c \
				src/checker/copy_for_play.c \
				src/checker/first_check.c \
				src/checker/map_closed.c \
				src/checker/playable_map.c \
				src/checker/playable_map2.c \
				src/checker/second_check.c \
				src/checker/third_check.c 

INCS = $(MLX_INCS) \
		$(MYLIB_INCS) \
		-Iinclude

OBJS_DIR	= .objs
OBJS		= $(SRCS:%.c=$(OBJS_DIR)/%.o)

# ğ˜¾ğ™¤ğ™¡ğ™¤ğ™§ ğ˜¾ğ™¤ğ™™ğ™šğ™¨
# â”€â”€â”€â”€à­¨à§â”€â”€â”€â”€
PINK = \033[38;2;255;105;180m
RESET = \033[0m

#â‹†âœ´ï¸Ëšï½¡â‹†âœ´ï¸Ëšï½¡â‹†ï½¡â‹†âœ´ï¸Ëšï½¡â‹†â‹†âœ´ï¸Ëšï½¡â‹†â‹†âœ´ï¸Ëšï½¡â‹†â‹†âœ´ï¸Ëšï½¡â‹†â‹†âœ¿Ëšï½¡â‹†â‹†âœ´ï¸Ëšâ‹†âœ´â‹†ï½¡â‹†â‹†âœ´ï¸Ëšï½¡â‹†âœ´ï¸#
#                 Main Commands                 #
#Ë–âºâ€§â‚ŠËšâ™¡Ëšâ‚Šâ€§âºË–Ë–âºâ€§â‚ŠËšâ™¡Ëšâ‚Šâ€§âºË–Ë–âºâ€§â‚ŠËšâ™¡Ëšâ‚Šâ€§âºË–Ë–âºâ€§â‚ŠËšâ™¡Ëšâ‚Šâ€§âºË–Ë–âºâ€§#

# ğ”»ğ•–ğ•—ğ•’ğ•¦ğ•ğ•¥ ğ•¥ğ•’ğ•£ğ•˜ğ•–ğ•¥, ğ•“ğ•¦ğ•šğ•ğ••ğ•¤ ğ•¤ğ• _ğ•ğ• ğ•Ÿğ•˜ #
# â”€â”€â”€à­¨à§â”€â”€â”€â”€ â‘… â™¡ â‘…  â”€â”€â”€â”€à­¨à§â”€â”€â”€â”€
all: $(MLX) $(MYLIB) $(NAME) 

$(OBJS_DIR)/%.o: %.c
	@mkdir -p $(dir $@)
	$(CC) $(CFLAGS) -c $< -o $@ $(INCS)

$(NAME): $(OBJS)
	$(CC) $(CFLAGS) $(OBJS) $(MLX_ADD) $(MYLIB_ADD) -o $(NAME)

#     â„ğ•–ğ•ğ• ğ•§ğ•– ğ• ğ•“ğ•›ğ•–ğ•”ğ•¥ ğ•—ğ•šğ•ğ•–ğ•¤   #
# â”€â”€â”€à­¨à§â”€â”€â”€â”€ â‘… â™¡ â‘…  â”€â”€â”€â”€à­¨à§â”€â”€â”€â”€
clean: mlx_clean mylib_clean
	@echo "$(PINK)Cleaning up object files...$(RESET)"
	$(RM) $(OBJS)

# ğ”½ğ•¦ğ•ğ• ğ•”ğ•ğ•–ğ•’ğ•Ÿ: ğ•£ğ•–ğ•ğ• ğ•§ğ•– ğ•ğ•šğ•“ğ•£ğ•’ğ•£ğ•ª ğ•—ğ•šğ•ğ•–ğ•¤ ğ•’ğ•¤ ğ•¨ğ•–ğ•ğ• #
# â”€â”€â”€à­¨à§â”€â”€â”€â”€ â‘… â™¡ â‘…  â”€â”€â”€â”€à­¨à§â”€â”€â”€â”€
fclean: mylib_fclean clean
	@echo "$(PINK)Removing $(NAME)...$(RESET)"
	$(RM) $(NAME)

# â„ğ•–ğ•“ğ•¦ğ•šğ•ğ•• ğ•–ğ•§ğ•–ğ•£ğ•ªğ•¥ğ•™ğ•šğ•Ÿğ•˜ ğ•—ğ•£ğ• ğ• ğ•¤ğ•”ğ•£ğ•’ğ•¥ğ•”ğ•™ #
# â”€â”€â”€à­¨à§â”€â”€â”€â”€ â‘… â™¡ â‘…  â”€â”€â”€â”€à­¨à§â”€â”€â”€â”€
re: fclean all

#    ğ•„ğ•šğ•Ÿğ•šğ•ƒğ•šğ•“ğ•© ğ•£ğ•¦ğ•ğ•–ğ•¤    #
# â”€â”€â”€à­¨à§â”€â”€â”€â”€ â‘… â™¡ â‘…  â”€â”€â”€â”€à­¨à§â”€â”€â”€â”€ 
$(MLX):
	make -C $(MLX_DIR) all --no-print-directory;

# â„ğ•–ğ•ğ• ğ•§ğ•– ğ• ğ•“ğ•›ğ•–ğ•”ğ•¥ ğ•—ğ•šğ•ğ•–ğ•¤ ğ•—ğ•£ğ• ğ• ğ•„ğ•šğ•Ÿğ•šğ•ƒğ•šğ•“ğ•© #
# â”€â”€â”€à­¨à§â”€â”€â”€â”€ â‘… â™¡ â‘…  â”€â”€â”€â”€à­¨à§â”€â”€â”€â”€
mlx_clean:
	make -C $(MLX_DIR) clean;

#  ğ•„ğ•ª ğ•ƒğ•šğ•“ğ•£ğ•’ğ•£ğ•ª ğ•£ğ•¦ğ•ğ•–ğ•¤  #
# â”€â”€â”€à­¨à§â”€â”€â”€â”€ â‘… â™¡ â‘…  â”€â”€â”€â”€à­¨à§â”€â”€â”€â”€ 
$(MYLIB):
	make -C $(MYLIB_DIR) all --no-print-directory;

#  â„ğ•–ğ•ğ• ğ•§ğ•– ğ•ğ•ª ğ•ğ•šğ•“ğ•£ğ•’ğ•£ğ•ª ğ• ğ•“ğ•›ğ•–ğ•”ğ•¥ğ•¤  #
# â”€â”€â”€à­¨à§â”€â”€â”€â”€ â‘… â™¡ â‘…  â”€â”€â”€â”€à­¨à§â”€â”€â”€â”€
mylib_clean:
	make -C $(MYLIB_DIR) clean --no-print-directory;


# ğ”½ğ•¦ğ•ğ• ğ•”ğ•ğ•–ğ•’ğ•Ÿ: ğ•£ğ•–ğ•ğ• ğ•§ğ•– ğ•ğ•ª ğ•ğ•šğ•“ğ•£ğ•’ğ•£ğ•ª ğ•—ğ•šğ•ğ•–ğ•¤ ğ•’ğ•¤ ğ•¨ğ•–ğ•ğ• #
# â”€â”€â”€à­¨à§â”€â”€â”€â”€ â‘… â™¡ â‘…  â”€â”€â”€â”€à­¨à§â”€â”€â”€â”€
mylib_fclean:
	make -C $(MYLIB_DIR) fclean --no-print-directory;

#â‹†âœ´ï¸Ëšï½¡â‹†âœ´ï¸Ëšï½¡â‹†ï½¡â‹†âœ´ï¸Ëšï½¡â‹†â‹†âœ´ï¸Ëšï½¡â‹†â‹†âœ´ï¸Ëšï½¡â‹†â‹†âœ´ï¸Ëšï½¡â‹†â‹†âœ´ï¸Ëšï½¡â‹†âœ¿â‹†Ëšâœ´â‹†âœ´Ëšï½¡â‹†â‹†âœ´ï¸Ëšâ‹†âœ´#
#                 Phony Targets                 #
#Ë–âºâ€§â‚ŠËšâ™¡Ëšâ‚Šâ€§âºË–Ë–âºâ€§â‚ŠËšâ™¡Ëšâ‚Šâ€§âºË–Ë–âºâ€§â‚ŠËšâ™¡Ëšâ‚Šâ€§âºË–Ë–âºâ€§â‚ŠËšâ™¡Ëšâ‚Šâ€§âºË–Ë–âºâ€§#

.PHONY: all clean fclean re

#  à«® Ë¶áµ” áµ• áµ”Ë¶ áƒ                               âœ§â‚Šâºâœ§â‚Š á“šá˜á—¢